{"version":3,"sources":["../../../../node_modules/%40untitledui/icons/dist/HelpCircle.mjs","../../../../node_modules/%40untitledui/icons/dist/ArrowLeft.mjs","../../../../src/app/username/page.tsx"],"sourcesContent":["import*as e from\"react\";const i=({size:r=24,color:o=\"currentColor\",...t})=>e.createElement(\"svg\",{viewBox:\"0 0 24 24\",width:r,height:r,stroke:o,strokeWidth:\"2\",fill:\"none\",strokeLinecap:\"round\",strokeLinejoin:\"round\",\"aria-hidden\":\"true\",...t},e.createElement(\"path\",{d:\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3m.08 4h.01M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Z\"}));i.displayName=\"HelpCircle\";export{i as HelpCircle};\n","import*as o from\"react\";const i=({size:r=24,color:e=\"currentColor\",...t})=>o.createElement(\"svg\",{viewBox:\"0 0 24 24\",width:r,height:r,stroke:e,strokeWidth:\"2\",fill:\"none\",strokeLinecap:\"round\",strokeLinejoin:\"round\",\"aria-hidden\":\"true\",...t},o.createElement(\"path\",{d:\"M19 12H5m0 0 7 7m-7-7 7-7\"}));i.displayName=\"ArrowLeft\";export{i as ArrowLeft};\n","\"use client\";\n\nimport { UntitledLogo } from \"@/components/foundations/logo/untitledui-logo\";\nimport { ArrowLeft } from \"@untitledui/icons\";\nimport { Button } from \"@/components/base/buttons/button\";\nimport { Input } from \"@/components/base/input/input\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { Suspense, useEffect, useState } from \"react\";\nimport { useAuth } from \"@/providers/auth\";\n\nconst Prefix = ({ className }: { className?: string }) => (\n    <span className={className}>oneinflu.com/</span>\n);\n\nconst UsernameContent = () => {\n    const router = useRouter();\n    const params = useSearchParams();\n    const emailParam = params.get(\"email\") || \"\";\n    const idParam = params.get(\"id\") || \"\";\n    const [email, setEmail] = useState(\"\");\n    useEffect(() => {\n        setEmail(emailParam);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    const [handle, setHandle] = useState(\"\");\n    useEffect(() => {\n        const suggested = email.split(\"@\")[0] || \"\";\n        setHandle(suggested);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [email]);\n    const verifyHref = email ? `/verify?id=${encodeURIComponent(idParam)}&to=${encodeURIComponent(email)}` : \"/verify\";\n    const [available, setAvailable] = useState<null | boolean>(null);\n    const [checking, setChecking] = useState(false);\n    const { registerSaveUsername } = useAuth();\n    const [saving, setSaving] = useState(false);\n\n    useEffect(() => {\n        const name = handle.trim();\n        if (!name) {\n            setAvailable(null);\n            return;\n        }\n        const API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL;\n        const controller = new AbortController();\n        setChecking(true);\n        const url = `${API_BASE}/auth/username/check?username=${encodeURIComponent(name)}`;\n        console.group(\"USERNAME_CHECK\");\n        console.log(\"REQUEST GET\", url);\n        console.log(\"EXPECTED_RESPONSE_SHAPES\", {\n            available: { success: true, status: \"ok\", data: { available: true } },\n            unavailable: { success: true, status: \"ok\", data: { available: false } },\n        });\n        console.groupEnd();\n        fetch(url, { signal: controller.signal })\n            .then(async (res) => {\n                const data = await res.json().catch(() => ({}));\n                console.group(\"USERNAME_CHECK_RESPONSE\");\n                console.log(\"STATUS\", res.status);\n                console.log(\"BODY\", data);\n                console.groupEnd();\n                const isAvailable = Boolean(data && data.data && typeof data.data.available !== \"undefined\" ? data.data.available : true);\n                setAvailable(isAvailable);\n            })\n            .catch(() => {})\n            .finally(() => setChecking(false));\n        return () => controller.abort();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [handle]);\n\n    const onContinue = async () => {\n        if (!available) return;\n        const id = idParam;\n        const uname = handle.trim().toLowerCase();\n        if (!id || !uname) return;\n        setSaving(true);\n        try {\n            await registerSaveUsername(id, uname);\n            try { localStorage.setItem(\"influu_username\", uname); } catch {}\n            router.push(verifyHref);\n        } catch {\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    return (\n        <section className=\"flex min-h-screen\">\n            <div className=\"flex w-full flex-col md:grid md:grid-cols-2\">\n                <div className=\"flex min-h-screen w-full flex-col px-4 py-12 md:px-12 lg:px-16 xl:px-20\">\n                    <div className=\"flex w-full items-start justify-start\">\n                        <UntitledLogo className=\"h-8 w-auto\" />\n                    </div>\n\n                    <div className=\"mx-auto flex w-full max-w-sm grow items-center md:mx-0 md:max-w-md\">\n                        <div className=\"flex w-full flex-col gap-6\">\n                            <div>\n                                <Button color=\"secondary\" size=\"sm\" iconLeading={ArrowLeft} href=\"/register\">\n                                    Back\n                                </Button>\n                            </div>\n                            <div className=\"flex flex-col gap-2\">\n                                <h1 className=\"text-display-sm font-semibold text-primary\">Create username</h1>\n                                <p className=\"text-md text-tertiary\">Try something similar to your social handles for easy recognition.</p>\n                            </div>\n\n                            <Input\n                                size=\"md\"\n                                label=\"Username\"\n                                icon={Prefix}\n                                iconClassName=\"left-3.5 text-md text-tertiary w-auto h-auto\"\n                                inputClassName=\"pl-36\"\n                                placeholder=\"your-handle\"\n                                value={handle}\n                                onChange={(v) => setHandle(String(v))}\n                                isInvalid={available === false}\n                                hint={available === false ? \"Username not available\" : undefined}\n                            />\n\n                            <Button size=\"lg\" onClick={onContinue} isDisabled={!available || saving}>Continue</Button>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"hidden md:block\">\n                    <img\n                        alt=\"Username illustration\"\n                        src=\"https://images.unsplash.com/photo-1523275335684-37898b6baf30?q=80&w=1200&auto=format&fit=crop\"\n                        className=\"h-full w-full object-cover\"\n                    />\n                </div>\n            </div>\n        </section>\n    );\n};\n\nexport default function UsernamePage() {\n    return (\n        <Suspense fallback={null}>\n            <UsernameContent />\n        </Suspense>\n    );\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1]}