module.exports=[54708,a=>{"use strict";async function b(a,{method:c="GET",body:d,token:e,headers:f={},signal:g}={}){let h=a.startsWith("http")?a:`https://newyearbackendcode-zrp62.ondigitalocean.app${a}`,i={"Content-Type":"application/json",...f};e&&(i.Authorization=`Bearer ${e}`);let j={method:c,headers:i,signal:g};void 0!==d&&"GET"!==c&&(j.body=JSON.stringify(d));let k=await fetch(h,j),l=k.headers.get("content-type")?.includes("application/json")?await k.json():void 0;if(!k.ok)throw Error(l?.message||l?.error||`HTTP ${k.status}`);return l??{}}a.s(["api",0,{get:(a,c)=>b(a,{...c??{},method:"GET"}),post:(a,c,d)=>b(a,{...d??{},method:"POST",body:c}),patch:(a,c,d)=>b(a,{...d??{},method:"PATCH",body:c}),delete:(a,c)=>b(a,{...c??{},method:"DELETE"})}])},39668,a=>{"use strict";var b,c=a.i(72131);let d="undefined"!=typeof document?null!=(b=c.default.useInsertionEffect)?b:c.default.useLayoutEffect:()=>{};function e(a,b,e){let[f,g]=(0,c.useState)(a||b),h=(0,c.useRef)(f),i=(0,c.useRef)(void 0!==a),j=void 0!==a;(0,c.useEffect)(()=>{i.current,i.current=j},[j]);let k=j?a:f;d(()=>{h.current=k});let[,l]=(0,c.useReducer)(()=>({}),{});return[k,(0,c.useCallback)((a,...b)=>{let c="function"==typeof a?a(h.current):a;Object.is(h.current,c)||(h.current=c,g(c),l(),null==e||e(c,...b))},[e])]}a.s(["useControlledState",()=>e])},61240,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(54708);let e=(0,c.createContext)(null);function f({children:a}){let[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(null);(0,c.useEffect)(()=>{try{let a=localStorage.getItem("influu_token");if(a)return void g(a);let b="undefined"!=typeof document&&document.cookie.split("; ").find(a=>a.startsWith("influu_token="))?.split("=")[1]||null;b&&g(b)}catch{}},[]),(0,c.useEffect)(()=>{let a=!0;return(async()=>{try{if(!f)return;let b=await d.api.get("/users/me",{token:f});if(!a)return;i({id:b.id,username:b.username,email:b.email});try{localStorage.setItem("influu_user_id",b.id)}catch{}}catch{}})(),()=>{a=!1}},[f]);let j=a=>{g(a),a?(localStorage.setItem("influu_token",a),function(a,b,c=7){let d=new Date;d.setTime(d.getTime()+24*c*36e5),document.cookie=`${a}=${b};expires=${d.toUTCString()};path=/`}("influu_token",a)):(localStorage.removeItem("influu_token"),document.cookie="influu_token=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/")},k=(0,c.useMemo)(()=>({token:f,user:h,setToken:j,setUser:a=>{i(a)},registerStart:async a=>(await d.api.post("/auth/register/start",{email:a})).data.id,async registerSaveUsername(a,b){await d.api.post("/auth/register/username/save",{id:a,username:b})},async registerSendOtp(a){await d.api.post("/auth/register/otp/send",{id:a})},async registerVerifyOtp(a,b){let c=await d.api.post("/auth/register/otp/verify",{id:a,code:b});j(c.data.token),i(c.data.user)},async loginPassword(a,b){let c=await d.api.post("/auth/login",{identifier:a,password:b});j(c.data.token),i(c.data.user)},async loginSendOtp(a){await d.api.post("/auth/otp/send",{identifier:a})},async loginVerifyOtp(a,b){let c=await d.api.post("/auth/otp/login",{identifier:a,code:b});j(c.data.token),i(c.data.user)},async updateUser(a,b){if(!f)throw Error("unauthorized");await d.api.patch(`/users/${a}`,b,{token:f}),"string"==typeof b.username&&i(a=>a?{...a,username:String(b.username)}:a)},async getMe(){if(!f)throw Error("unauthorized");let a=f.split(".");if(3!==a.length)throw Error("invalid_token");let b=a[1].replace(/-/g,"+").replace(/_/g,"/");for(;b.length%4;)b+="=";let c=String("");if(!c)throw Error("missing_user_id");return await d.api.get(`/users/id/${c}`,{token:f})},async updateUserById(a,b){if(!f)throw Error("unauthorized");await d.api.patch(`/users/id/${a}`,b,{token:f}),"string"==typeof b.username&&i(a=>a?{...a,username:String(b.username)}:a)},async uploadAvatar(a,b){if(!f)throw Error("unauthorized");if("string"==typeof b)return(await d.api.post(`/users/${a}/avatar`,{url:b},{token:f})).avatarUrl;{let c=new FormData;c.append("avatar",b);let d=`https://newyearbackendcode-zrp62.ondigitalocean.app/users/${a}/avatar`,e=await fetch(d,{method:"POST",headers:{Authorization:`Bearer ${f}`},body:c}),g=await e.json().catch(()=>({}));if(!e.ok)throw Error(g?.error||`HTTP ${e.status}`);return g?.avatarUrl}},async uploadAvatarById(a,b){if(!f)throw Error("unauthorized");if("string"==typeof b)return(await d.api.post(`/users/id/${a}/avatar`,{url:b},{token:f})).avatarUrl;{let c=new FormData;c.append("avatar",b);let d=`https://newyearbackendcode-zrp62.ondigitalocean.app/users/id/${a}/avatar`,e=await fetch(d,{method:"POST",headers:{Authorization:`Bearer ${f}`},body:c}),g=await e.json().catch(()=>({}));if(!e.ok)throw Error(g?.error||`HTTP ${e.status}`);return g?.avatarUrl}},async createSocialLink(a,b,c){if(!f)throw Error("unauthorized");await d.api.post(`/users/${a}/social-links`,{platform:b,url:c},{token:f})}}),[f,h]);return(0,b.jsx)(e.Provider,{value:k,children:a})}function g(){let a=(0,c.useContext)(e);if(!a)throw Error("AuthContext missing");return a}a.s(["AuthProvider",()=>f,"useAuth",()=>g])},75756,a=>{"use strict";var b=a.i(87924),c=a.i(95908),d=a.i(184),e=a.i(28303),f=a.i(13325),g=a.i(12564),h=a.i(7186),i=a.i(90953),j=a.i(91759),k=a.i(72131),l=a.i(66257),m=a.i(35112),n=a.i(18472);let o=k.default.createContext(null);function p(a){let{children:b}=a,c=(0,k.useContext)(o),[d,e]=(0,k.useState)(0),f=(0,k.useMemo)(()=>({parent:c,modalCount:d,addModal(){e(a=>a+1),c&&c.addModal()},removeModal(){e(a=>a-1),c&&c.removeModal()}}),[c,d]);return k.default.createElement(o.Provider,{value:f},b)}function q(a){let b,{modalProviderProps:c}={modalProviderProps:{"aria-hidden":!!(b=(0,k.useContext)(o))&&b.modalCount>0||void 0}};return k.default.createElement("div",{"data-overlay-container":!0,...a,...c})}function r(a){return k.default.createElement(p,null,k.default.createElement(q,a))}function s(a){let b=(0,n.useIsSSR)(),{portalContainer:c=b?null:document.body,...d}=a,{getContainer:e}=(0,l.useUNSAFE_PortalContext)();if(!a.portalContainer&&e&&(c=e()),k.default.useEffect(()=>{if(null==c?void 0:c.closest("[data-overlay-container]"))throw Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[c]),!c)return null;let f=k.default.createElement(r,d);return m.default.createPortal(f,c)}var t=a.i(39987),u=a.i(54200),v=a.i(84442),w=a.i(37205);let x={},y=0,z=!1,A=null,B=null;function C(a={}){let{delay:b=1500,closeDelay:c=500}=a,{isOpen:d,open:e,close:f}=(0,w.useOverlayTriggerState)(a),g=(0,k.useMemo)(()=>`${++y}`,[]),h=(0,k.useRef)(null),i=(0,k.useRef)(f),j=()=>{x[g]=n},l=()=>{for(let a in x)a!==g&&(x[a](!0),delete x[a])},m=()=>{h.current&&clearTimeout(h.current),h.current=null,l(),j(),z=!0,e(),A&&(clearTimeout(A),A=null),B&&(clearTimeout(B),B=null)},n=a=>{a||c<=0?(h.current&&clearTimeout(h.current),h.current=null,i.current()):h.current||(h.current=setTimeout(()=>{h.current=null,i.current()},c)),A&&(clearTimeout(A),A=null),z&&(B&&clearTimeout(B),B=setTimeout(()=>{delete x[g],B=null,z=!1},Math.max(500,c)))};return(0,k.useEffect)(()=>{i.current=f},[f]),(0,k.useEffect)(()=>()=>{h.current&&clearTimeout(h.current),x[g]&&delete x[g]},[g]),{isOpen:d,open:a=>{a||!(b>0)||h.current?m():(l(),j(),d||A||z?d||m():A=setTimeout(()=>{A=null,z=!0,m()},b))},close:n}}let D=(0,k.createContext)(null),E=(0,k.createContext)(null);function F(a){let b=C(a),c=(0,k.useRef)(null),{triggerProps:d,tooltipProps:l}=function(a,b,c){let{isDisabled:d,trigger:e,shouldCloseOnPress:l=!0}=a,m=(0,i.useId)(),n=(0,k.useRef)(!1),o=(0,k.useRef)(!1),p=()=>{(n.current||o.current)&&b.open(o.current)},q=a=>{n.current||o.current||b.close(a)};(0,k.useEffect)(()=>{let a=a=>{c&&c.current&&"Escape"===a.key&&(a.stopPropagation(),b.close(!0))};if(b.isOpen)return document.addEventListener("keydown",a,!0),()=>{document.removeEventListener("keydown",a,!0)}},[c,b]);let r=()=>{l&&(o.current=!1,n.current=!1,q(!0))},{hoverProps:s}=(0,g.useHover)({isDisabled:d,onHoverStart:()=>{"focus"!==e&&("pointer"===(0,f.getInteractionModality)()?n.current=!0:n.current=!1,p())},onHoverEnd:()=>{"focus"!==e&&(o.current=!1,n.current=!1,q())}}),{focusableProps:t}=(0,h.useFocusable)({isDisabled:d,onFocus:()=>{(0,f.isFocusVisible)()&&(o.current=!0,p())},onBlur:()=>{o.current=!1,n.current=!1,q(!0)}},c);return{triggerProps:{"aria-describedby":b.isOpen?m:void 0,...(0,j.mergeProps)(t,s,{onPointerDown:r,onKeyDown:r}),tabIndex:void 0},tooltipProps:{id:m}}}(a,b,c);return k.default.createElement(e.Provider,{values:[[D,b],[E,{...l,triggerRef:c}]]},k.default.createElement(h.FocusableProvider,{...d,ref:c},a.children))}let G=(0,k.forwardRef)(function({UNSTABLE_portalContainer:a,...b},c){[b,c]=(0,e.useContextProps)(b,c,E);let d=(0,k.useContext)(D),f=C(b),g=null==b.isOpen&&null==b.defaultOpen&&d?d:f,h=(0,v.useExitAnimation)(c,g.isOpen)||b.isExiting||!1;return g.isOpen||h?k.default.createElement(s,{portalContainer:a},k.default.createElement(H,{...b,tooltipRef:c,isExiting:h})):null});function H(a){let b=(0,k.useContext)(D),c=(0,k.useRef)(null),{overlayProps:f,arrowProps:h,placement:i,triggerAnchorPoint:l}=(0,t.useOverlayPosition)({placement:a.placement||"top",targetRef:a.triggerRef,overlayRef:a.tooltipRef,arrowRef:c,offset:a.offset,crossOffset:a.crossOffset,isOpen:b.isOpen,arrowBoundaryOffset:a.arrowBoundaryOffset,shouldFlip:a.shouldFlip,containerPadding:a.containerPadding,onClose:()=>b.close(!0)}),m=(0,v.useEnterAnimation)(a.tooltipRef,!!i)||a.isEntering||!1,n=(0,e.useRenderProps)({...a,defaultClassName:"react-aria-Tooltip",values:{placement:i,isEntering:m,isExiting:a.isExiting,state:b}}),{tooltipProps:o}=function(a,b){let c=(0,u.filterDOMProps)(a,{labelable:!0}),{hoverProps:d}=(0,g.useHover)({onHoverStart:()=>null==b?void 0:b.open(!0),onHoverEnd:()=>null==b?void 0:b.close()});return{tooltipProps:(0,j.mergeProps)(c,d,{role:"tooltip"})}}(a=(0,j.mergeProps)(a,f),b),p=(0,u.filterDOMProps)(a,{global:!0});return k.default.createElement("div",{...(0,j.mergeProps)(p,n,o),ref:a.tooltipRef,style:{...f.style,"--trigger-anchor-point":l?`${l.x}px ${l.y}px`:void 0,...n.style},"data-placement":null!=i?i:void 0,"data-entering":m||void 0,"data-exiting":a.isExiting||void 0},k.default.createElement(d.OverlayArrowContext.Provider,{value:{...h,placement:i,ref:c}},n.children))}var I=a.i(10782);a.s(["Tooltip",0,({title:a,description:c,children:e,arrow:f=!1,delay:g=300,closeDelay:h=0,trigger:i,isDisabled:j,isOpen:k,defaultOpen:l,offset:m=6,crossOffset:n,placement:o="top",onOpenChange:p,...q})=>{let r=["top left","top end","bottom left","bottom end"].includes(o),s=["top right","top start","bottom right","bottom start"].includes(o);return(0,b.jsxs)(F,{trigger:i,delay:g,closeDelay:h,isDisabled:j,isOpen:k,defaultOpen:l,onOpenChange:p,children:[e,(0,b.jsx)(G,{...q,offset:m,placement:o,crossOffset:n??(r?-12:12*!!s),className:({isEntering:a,isExiting:b})=>(0,I.cx)(a&&"ease-out animate-in",b&&"ease-in animate-out"),children:({isEntering:e,isExiting:g})=>(0,b.jsxs)("div",{className:(0,I.cx)("z-50 flex max-w-xs origin-(--trigger-anchor-point) flex-col items-start gap-1 rounded-lg bg-primary-solid px-3 shadow-lg will-change-transform",c?"py-3":"py-2",e&&"ease-out animate-in fade-in zoom-in-95 in-placement-left:slide-in-from-right-0.5 in-placement-right:slide-in-from-left-0.5 in-placement-top:slide-in-from-bottom-0.5 in-placement-bottom:slide-in-from-top-0.5",g&&"ease-in animate-out fade-out zoom-out-95 in-placement-left:slide-out-to-right-0.5 in-placement-right:slide-out-to-left-0.5 in-placement-top:slide-out-to-bottom-0.5 in-placement-bottom:slide-out-to-top-0.5"),children:[(0,b.jsx)("span",{className:"text-xs font-semibold text-white",children:a}),c&&(0,b.jsx)("span",{className:"text-xs font-medium text-tooltip-supporting-text",children:c}),f&&(0,b.jsx)(d.OverlayArrow,{children:(0,b.jsx)("svg",{viewBox:"0 0 100 100",className:"size-2.5 fill-bg-primary-solid in-placement-left:-rotate-90 in-placement-right:rotate-90 in-placement-top:rotate-0 in-placement-bottom:rotate-180",children:(0,b.jsx)("path",{d:"M0,0 L35.858,35.858 Q50,50 64.142,35.858 L100,0 Z"})})})]})})]})},"TooltipTrigger",0,({children:a,className:d,...e})=>(0,b.jsx)(c.Button,{...e,className:a=>(0,I.cx)("h-max w-max outline-hidden","function"==typeof d?d(a):d),children:a})],75756)}];

//# sourceMappingURL=_f2f2112b._.js.map