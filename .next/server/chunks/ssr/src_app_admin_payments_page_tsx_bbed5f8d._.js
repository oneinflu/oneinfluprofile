module.exports=[53084,a=>{"use strict";var b=a.i(87924),c=a.i(52507),d=a.i(37819),e=a.i(15009),f=a.i(98275),g=a.i(36595),h=a.i(33210),i=a.i(53343),j=a.i(72131),k=a.i(54708),l=a.i(61240);function m(){let{token:a,user:e,getMe:f}=(0,l.useAuth)(),[g,h]=(0,j.useState)(!0),i=(0,j.useMemo)(()=>new Intl.NumberFormat("en-IN"),[]),[m,t]=(0,j.useState)([]),[u,v]=(0,j.useState)([]),[w,x]=(0,j.useState)("Creator"),[y,z]=(0,j.useState)("");(0,j.useEffect)(()=>{let b=!0;return(async()=>{try{if(!e?.username)return;let c=await k.api.get(`/users/${e.username}/payments`,{token:a});if(!b)return;let d=(c.data?.payments||[]).map(a=>({id:String(a.paymentId),date:new Date(a.createdAt).toLocaleDateString(),brand:String(a.brand||"—"),service:String(a.purpose||"—"),amount:Number(a.amount||0),mode:"UPI",status:"paid"===a.status?"received":"pending",url:`/pay/${String(a.paymentId)}`}));t(d);let g=await k.api.get(`/users/${e.username}/offers`,{token:a}),h=(g.data?.offers||[]).map(a=>({id:String(a._id),title:a.title}));v(h);try{let a=await f();if(!b)return;x(a.name||e.username),z(a.upi||"")}catch{}}catch{}finally{h(!1)}})(),()=>{b=!1}},[e?.username,a]);let A=(0,j.useMemo)(()=>{let a=new Date,b=a.getMonth(),c=a.getFullYear(),d=a=>"number"==typeof a?a:0,e=m.filter(a=>"received"===a.status).reduce((a,b)=>a+d(b.amount),0);return{received:e,pending:m.filter(a=>"pending"===a.status).reduce((a,b)=>a+d(b.amount),0),month:m.filter(a=>{try{let d=a.date.split(" ");return new Date(`${d[1]} ${d[0]} ${c}`).getMonth()===b}catch{return!1}}).filter(a=>"received"===a.status).reduce((a,b)=>a+d(b.amount),0)}},[m]),B={received:"success",pending:"warning"},[C,D]=(0,j.useState)(!1),[E,F]=(0,j.useState)({brand:"",service:"Reel Promo",amount:void 0,mode:"UPI",txId:"",date:new Date().toLocaleDateString(void 0,{day:"2-digit",month:"short"}),status:"received",proofUrl:void 0,notes:""});(0,j.useRef)(null);let G=u.map(a=>({id:a.id,label:a.title}))??[{id:"Custom",label:"Custom purpose"}],H={name:w,upiIds:[y||""]},[I,J]=(0,j.useState)(!1),[K,L]=(0,j.useState)({amount:void 0,service:"Reel Promo",purpose:"Instagram Reel Promotion",payer:"",note:"",method:"UPI",upiId:H.upiIds[0]}),[M,N]=(0,j.useState)(null),[O,P]=(0,j.useState)(!1),[Q,R]=(0,j.useState)(null),[S,T]=(0,j.useState)(!1),[U,V]=(0,j.useState)(null),[W,X]=(0,j.useState)(!1),[Y,Z]=(0,j.useState)(null),[$,_]=(0,j.useState)({amount:void 0,mode:"UPI",txId:"",date:new Date().toLocaleDateString(void 0,{day:"2-digit",month:"short"}),proofUrl:void 0,notes:""}),[aa,ab]=(0,j.useState)(!1),[ac,ad]=(0,j.useState)(null),[ae,af]=(0,j.useState)(null),ag=(0,j.useRef)(null),ah=a=>{ag.current&&(window.clearTimeout(ag.current),ag.current=null),af(a),ag.current=window.setTimeout(()=>{af(null),ag.current=null},2e3)};return(0,b.jsxs)("section",{className:"flex min-h-screen flex-col lg:pl-[300px]",children:[(0,b.jsx)("div",{className:" top-0 z-10 px-4 md:px-8 pt-6 pb-4",children:(0,b.jsx)("div",{className:"w-full max-w-8xl",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex min-w-0 flex-col gap-1",children:[(0,b.jsx)("h1",{className:"text-lg md:text-display-sm font-semibold text-primary md:truncate",children:"Payments"}),(0,b.jsx)("p",{className:"text-sm md:text-md text-tertiary md:truncate",children:"Track and manage your payments"})]}),(0,b.jsxs)("div",{className:"mt-3 md:mt-0 grid grid-cols-1 gap-2 md:flex md:items-center md:gap-2 md:shrink-0",children:[(0,b.jsx)(c.Button,{className:"w-full md:w-auto flex-none",size:"sm",color:"secondary",onClick:()=>J(!0),children:"+ Generate Payment Request"}),(0,b.jsx)(c.Button,{className:"w-full md:w-auto flex-none",size:"sm",color:"secondary",onClick:()=>D(!0),children:"+ Add Payment (Manual)"})]})]})})}),(0,b.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto overscroll-contain px-4 md:px-8 pt-8 pb-12",children:(0,b.jsx)("div",{className:"w-full max-w-8xl",children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-6",children:[0,1,2].map(a=>(0,b.jsxs)("div",{className:"rounded-2xl bg-primary p-4 md:p-5 shadow-xs ring-1 ring-secondary_alt",children:[(0,b.jsx)("div",{className:"h-3 w-24 bg-primary_hover animate-pulse rounded"}),(0,b.jsx)("div",{className:"mt-3 h-6 w-32 bg-primary_hover animate-pulse rounded"})]},a))}),(0,b.jsxs)("div",{className:"rounded-2xl bg-primary p-0 shadow-xs ring-1 ring-secondary_alt hidden md:block",children:[(0,b.jsx)("div",{className:"grid grid-cols-[1fr_2fr_2fr_1fr_1fr_auto] gap-3 px-4 py-2",children:[0,1,2,3,4,5].map(a=>(0,b.jsx)("div",{className:"h-3 bg-primary_hover animate-pulse rounded"},a))}),(0,b.jsx)("ul",{className:"divide-y divide-secondary",children:[...Array(6)].map((a,c)=>(0,b.jsxs)("li",{className:"grid grid-cols-[1fr_2fr_2fr_1fr_1fr_auto] gap-3 px-4 py-3",children:[(0,b.jsx)("div",{className:"h-4 bg-primary_hover animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-4 bg-primary_hover animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-4 bg-primary_hover animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-4 bg-primary_hover animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-4 bg-primary_hover animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-6 w-20 bg-primary_hover animate-pulse rounded justify-self-end"})]},c))})]}),(0,b.jsx)("div",{className:"md:hidden",children:(0,b.jsx)("ul",{className:"flex flex-col gap-3",children:[...Array(6)].map((a,c)=>(0,b.jsx)("li",{className:"rounded-2xl bg-primary px-4 py-4 shadow-xs ring-1 ring-secondary_alt",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"h-3 w-20 bg-primary_hover animate-pulse rounded"}),(0,b.jsx)("div",{className:"mt-2 h-4 w-40 bg-primary_hover animate-pulse rounded"}),(0,b.jsx)("div",{className:"mt-1 h-3 w-32 bg-primary_hover animate-pulse rounded"})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2 shrink-0",children:[(0,b.jsx)("div",{className:"h-4 w-24 bg-primary_hover animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-5 w-16 bg-primary_hover animate-pulse rounded"})]})]})},c))})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-6",children:[(0,b.jsxs)("div",{className:"rounded-2xl bg-primary p-4 md:p-5 shadow-xs ring-1 ring-secondary_alt",children:[(0,b.jsx)("p",{className:"text-xs font-medium uppercase tracking-wide text-secondary",children:"Total Received"}),(0,b.jsxs)("p",{className:"text-display-sm font-semibold text-primary",children:["₹",i.format(A.received)]})]}),(0,b.jsxs)("div",{className:"rounded-2xl bg-primary p-4 md:p-5 shadow-xs ring-1 ring-secondary_alt",children:[(0,b.jsx)("p",{className:"text-xs font-medium uppercase tracking-wide text-secondary",children:"Total Pending"}),(0,b.jsxs)("p",{className:"text-display-sm font-semibold text-primary",children:["₹",i.format(A.pending)]})]}),(0,b.jsxs)("div",{className:"rounded-2xl bg-primary p-4 md:p-5 shadow-xs ring-1 ring-secondary_alt",children:[(0,b.jsx)("p",{className:"text-xs font-medium uppercase tracking-wide text-secondary",children:"This Month"}),(0,b.jsxs)("p",{className:"text-display-sm font-semibold text-primary",children:["₹",i.format(A.month)]})]})]}),(0,b.jsxs)("div",{className:"rounded-2xl bg-primary p-0 shadow-xs ring-1 ring-secondary_alt hidden md:block",children:[(0,b.jsxs)("div",{className:"grid grid-cols-[1fr_2fr_2fr_1fr_1fr_auto] items-center gap-3 px-4 py-2 text-xs font-medium uppercase tracking-wide text-secondary",children:[(0,b.jsx)("div",{children:"Date"}),(0,b.jsx)("div",{children:"Brand / Payer"}),(0,b.jsx)("div",{children:"Service"}),(0,b.jsx)("div",{children:"Amount"}),(0,b.jsx)("div",{children:"Mode"}),(0,b.jsx)("div",{className:"justify-self-end",children:"Status"})]}),(0,b.jsx)("ul",{className:"divide-y divide-secondary",children:m.map(a=>(0,b.jsxs)("li",{className:"grid grid-cols-[1fr_2fr_2fr_1fr_1fr_auto] items-center gap-3 px-4 py-3 hover:bg-primary_hover cursor-pointer",onClick:()=>{ad(a),ab(!0)},children:[(0,b.jsx)("div",{className:"text-sm text-secondary",children:a.date}),(0,b.jsx)("div",{className:"truncate text-md font-medium text-primary",children:a.brand}),(0,b.jsx)("div",{className:"truncate text-sm text-tertiary",children:a.service}),(0,b.jsxs)("div",{className:"truncate text-sm text-primary",children:["₹",i.format(a.amount)]}),(0,b.jsx)("div",{className:"truncate text-sm text-tertiary",children:a.mode}),(0,b.jsx)("div",{className:"justify-self-end flex items-center gap-2",children:(0,b.jsx)(d.Badge,{size:"sm",color:B[a.status],children:"received"===a.status?"Received":"Pending"})})]},a.id))})]}),(0,b.jsx)("div",{className:"md:hidden",children:(0,b.jsx)("ul",{className:"flex flex-col gap-3",children:m.map(a=>(0,b.jsxs)("li",{className:"rounded-2xl bg-primary px-4 py-4 shadow-xs ring-1 ring-secondary_alt active:scale-[0.99]",onClick:()=>{ad(a),ab(!0)},children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm text-secondary",children:a.date}),(0,b.jsx)("p",{className:"truncate text-md font-semibold text-primary",children:a.brand}),(0,b.jsx)("p",{className:"truncate text-sm text-tertiary",children:a.service})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-1 shrink-0",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-primary",children:["₹",i.format(a.amount)]}),(0,b.jsx)(d.Badge,{size:"sm",color:B[a.status],children:"received"===a.status?"Received":"Pending"})]})]}),(0,b.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:a.mode}),(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Tap to view"})]})]},a.id))})})]})})}),(0,b.jsx)(n,{isOpen:C,onOpenChange:D,draft:E,setDraft:F,onSave:async()=>{if(E.brand.trim()&&E.service.trim()&&"number"==typeof E.amount)try{if(!e?.username||!a)throw Error("unauthorized");let b=(await k.api.post(`/users/${e.username}/payments`,{brand:E.brand.trim(),service:E.service.trim(),amount:E.amount,mode:E.mode,txId:E.txId||null,date:E.date,status:E.status,notes:E.notes||null},{token:a})).payment,c={id:b.id,date:b.date,brand:b.brand,service:b.service,amount:b.amount,mode:b.mode,status:b.status,txId:b.txId||void 0};t(a=>[c,...a])}catch{}finally{D(!1)}}}),(0,b.jsx)(o,{isOpen:I,onOpenChange:a=>{J(a),a||N(null)},draft:K,setDraft:L,offerOptions:G,creator:H,generatedLink:M,notify:ah,onGenerate:async()=>{if("number"==typeof K.amount&&K.amount&&K.purpose.trim())try{if(!e?.username||!a)throw Error("unauthorized");let b=(await k.api.post(`/users/${e.username}/payments`,{amount:K.amount,offerId:K.service,brand:(K.payer||"").trim(),notes:(K.note||"").trim(),purpose:K.purpose.trim()},{token:a})).data.payment;N(b.url),t(a=>[{id:b.id,date:new Date().toLocaleDateString(),brand:b.brand||"—",service:b.purpose||"—",amount:b.amount,mode:"UPI",status:"paid"===b.status?"received":"pending",url:b.url},...a]),R({amount:b.amount,purpose:K.purpose,payer:K.payer}),P(!0),J(!1)}catch{}}}),(0,b.jsx)(s,{isOpen:O,onOpenChange:a=>P(a),details:Q}),U&&(0,b.jsx)(r,{isOpen:S,onOpenChange:a=>T(a),payment:U,creator:H,onDownload:()=>{if(!U)return;let a=`<!doctype html><html><head><meta charset="utf-8"/><title>Payment Receipt</title><style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;color:#111}h1{font-size:20px;margin:0 0 8px}h2{font-size:14px;margin:16px 0 6px;color:#555}table{width:100%;border-collapse:collapse}td{padding:8px;border-bottom:1px solid #eee}footer{margin-top:16px;font-size:12px;color:#666}</style></head><body><h1>Payment Receipt (Non-Tax)</h1><table><tr><td>Creator</td><td>${H.name}</td></tr><tr><td>Brand / Payer</td><td>${U.brand||""}</td></tr><tr><td>Service</td><td>${U.service}</td></tr><tr><td>Amount</td><td>₹${i.format(U.amount)}</td></tr><tr><td>Date</td><td>${U.date}</td></tr><tr><td>Payment mode</td><td>${U.mode}</td></tr>${U.txId?`<tr><td>Transaction ID</td><td>${U.txId}</td></tr>`:""}</table><footer>Generated by INFLU • This is a payment receipt, not a tax invoice.</footer></body></html>`,b=window.open("","_blank");b&&(b.document.write(a),b.document.close(),b.focus(),b.print())},onShare:async()=>{if(!U)return;let a=`Payment Receipt (Non-Tax)
Creator: ${H.name}
Payer: ${U.brand||""}
Service: ${U.service}
Amount: ₹${i.format(U.amount)}
Date: ${U.date}
Mode: ${U.mode}${U.txId?`
Transaction ID: ${U.txId}`:""}`;try{navigator.share?(await navigator.share({title:"Payment Receipt",text:a}),ah("Share sheet opened")):(await navigator.clipboard.writeText(a),ah("Text copied"))}catch(a){ah("Sharing failed")}}}),(0,b.jsx)(p,{isOpen:aa,onOpenChange:a=>ab(a),payment:ac,notify:ah,onRecord:a=>{a&&(Z(a.id),_(b=>({...b,amount:a.amount})),X(!0))},onViewReceipt:a=>{a&&(V(a),T(!0))}}),(0,b.jsx)(q,{isOpen:W,onOpenChange:a=>X(a),draft:$,setDraft:_,onSave:async()=>{if(Y)try{if(!e?.username||!a)throw Error("unauthorized");let b=(await k.api.patch(`/users/${e.username}/payments/${Y}`,{amount:"number"==typeof $.amount?$.amount:void 0,mode:$.mode,txId:$.txId||null,date:$.date,status:"received",proofUrl:$.proofUrl||null,notes:$.notes||null},{token:a})).payment;t(a=>a.map(a=>a.id===Y?{id:b.id,date:b.date,brand:b.brand,service:b.service,amount:b.amount,mode:b.mode,status:b.status,txId:b.txId||void 0,proofUrl:b.proofUrl||void 0}:a))}catch{}finally{X(!1),Z(null)}}}),ae&&(0,b.jsx)("div",{className:"fixed bottom-6 left-1/2 z-[9999] -translate-x-1/2 rounded-full bg-primary px-4 py-2 shadow-xs ring-1 ring-secondary_alt",children:(0,b.jsx)("span",{className:"text-sm font-medium text-primary",children:ae})})]})}function n({isOpen:a,onOpenChange:d,draft:k,setDraft:l,onSave:m}){let n=(0,j.useRef)(null);return(0,b.jsxs)(h.DialogTrigger,{isOpen:a,onOpenChange:d,children:[(0,b.jsx)("span",{slot:"trigger"}),(0,b.jsx)(i.ModalOverlay,{isDismissable:!0,className:({isEntering:a,isExiting:b})=>`fixed inset-0 z-50 bg-overlay/40 backdrop-blur-sm ${a?"duration-150 ease-out animate-in fade-in":""} ${b?"duration-100 ease-in animate-out fade-out":""}`,children:({state:a})=>(0,b.jsx)(i.Modal,{className:"w-full cursor-auto",children:(0,b.jsxs)(h.Dialog,{"aria-label":"Add payment",className:"ml-auto h-dvh w-full max-w-md overflow-y-auto rounded-none bg-primary shadow-xl ring-1 ring-secondary_alt focus:outline-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border-b border-secondary px-4 py-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-primary",children:"Add Payment"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.Button,{size:"sm",color:"secondary",onClick:m,children:"Save Payment"}),(0,b.jsx)(c.Button,{size:"sm",onClick:()=>a.close(),children:"Cancel"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-6 px-4 py-4",children:[(0,b.jsxs)("div",{className:"flex min-w-0 flex-col gap-2",children:[(0,b.jsx)("h3",{className:"text-md font-semibold text-primary",children:"Payment Info"}),(0,b.jsx)(e.Input,{label:"Brand / Payer name",placeholder:"required",value:k.brand,onChange:a=>l(b=>({...b,brand:a}))}),(0,b.jsx)(e.Input,{label:"Service",placeholder:"e.g. Reel Promo",value:k.service,onChange:a=>l(b=>({...b,service:a}))}),(0,b.jsx)(e.Input,{label:"Amount (₹)",type:"number",inputMode:"numeric",placeholder:"required",value:"number"==typeof k.amount?String(k.amount):"",onChange:a=>l(b=>({...b,amount:a?Number(a):void 0}))}),(0,b.jsx)(g.Select,{size:"md",label:"Payment mode",items:[{id:"UPI",label:"UPI"},{id:"Bank",label:"Bank transfer"},{id:"Cash",label:"Cash"},{id:"Other",label:"Other"}],selectedKey:k.mode,onSelectionChange:a=>l(b=>({...b,mode:String(a)})),children:a=>(0,b.jsx)(g.Select.Item,{id:a.id,children:a.label})})]}),(0,b.jsxs)("div",{className:"flex min-w-0 flex-col gap-2",children:[(0,b.jsx)("h3",{className:"text-md font-semibold text-primary",children:"Transaction Details"}),(0,b.jsx)(e.Input,{label:"Transaction ID",placeholder:"optional",value:k.txId||"",onChange:a=>l(b=>({...b,txId:a}))}),(0,b.jsx)(e.Input,{label:"Date of payment",placeholder:"e.g. 12 Dec",value:k.date,onChange:a=>l(b=>({...b,date:a}))}),(0,b.jsx)(g.Select,{size:"md",label:"Status",items:[{id:"received",label:"Received"},{id:"pending",label:"Pending"}],selectedKey:k.status,onSelectionChange:a=>l(b=>({...b,status:String(a)})),children:a=>(0,b.jsx)(g.Select.Item,{id:a.id,children:a.label})})]}),(0,b.jsxs)("div",{className:"flex min-w-0 flex-col gap-2",children:[(0,b.jsx)("h3",{className:"text-md font-semibold text-primary",children:"Proof (Optional)"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.Button,{size:"sm",color:"secondary",onClick:()=>n.current?.click(),children:"Upload screenshot / PDF"}),(0,b.jsx)("input",{ref:n,type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:a=>{let b=a.target.files?.[0];b&&l(a=>({...a,proofUrl:b.name}))}})]}),(0,b.jsx)(f.TextArea,{label:"Notes",rows:3,value:k.notes||"",onChange:a=>l(b=>({...b,notes:a}))})]})]})]})})})]})}function o({isOpen:a,onOpenChange:d,draft:k,setDraft:l,offerOptions:m,creator:n,generatedLink:o,notify:p,onGenerate:q}){return(0,j.useRef)(null),(0,b.jsxs)(h.DialogTrigger,{isOpen:a,onOpenChange:d,children:[(0,b.jsx)("span",{slot:"trigger"}),(0,b.jsx)(i.ModalOverlay,{isDismissable:!0,className:({isEntering:a,isExiting:b})=>`fixed inset-0 z-50 bg-overlay/40 backdrop-blur-sm ${a?"duration-150 ease-out animate-in fade-in":""} ${b?"duration-100 ease-in animate-out fade-out":""}`,children:({state:a})=>(0,b.jsx)(i.Modal,{className:"w-full cursor-auto",children:(0,b.jsxs)(h.Dialog,{"aria-label":"Generate payment request",className:"ml-auto h-dvh w-full max-w-md overflow-y-auto rounded-none bg-primary shadow-xl ring-1 ring-secondary_alt focus:outline-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border-b border-secondary px-4 py-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-primary",children:"Generate Payment Request"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.Button,{size:"sm",color:"secondary",onClick:q,children:"Generate Link"}),(0,b.jsx)(c.Button,{size:"sm",onClick:()=>a.close(),children:"Close"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-6 px-4 py-4",children:[(0,b.jsxs)("div",{className:"flex min-w-0 flex-col gap-2",children:[(0,b.jsx)("h3",{className:"text-md font-semibold text-primary",children:"Amount"}),(0,b.jsx)(e.Input,{label:"Amount (₹)",type:"number",inputMode:"numeric",placeholder:"required",value:"number"==typeof k.amount?String(k.amount):"",onChange:a=>l(b=>({...b,amount:a?Number(a):void 0}))}),(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:[1e3,5e3,1e4].map(a=>(0,b.jsxs)(c.Button,{size:"sm",color:"secondary",onClick:()=>l(b=>({...b,amount:a})),children:["₹",a.toLocaleString("en-IN")]},a))})]}),(0,b.jsxs)("div",{className:"flex min-w-0 flex-col gap-2",children:[(0,b.jsx)("h3",{className:"text-md font-semibold text-primary",children:"Payment For"}),(0,b.jsx)(g.Select,{size:"md",label:"Service",items:m,selectedKey:k.service,onSelectionChange:a=>{let b=String(a),c=m.find(a=>a.id===b);l(a=>({...a,service:b,purpose:"Custom"===b?a.purpose:c?.label||b}))},children:a=>(0,b.jsx)(g.Select.Item,{id:a.id,children:a.label})}),(0,b.jsx)(e.Input,{label:"Purpose",placeholder:"e.g. Instagram Reel Promotion",value:k.purpose,onChange:a=>l(b=>({...b,purpose:a}))})]}),(0,b.jsxs)("div",{className:"flex min-w-0 flex-col gap-2",children:[(0,b.jsx)("h3",{className:"text-md font-semibold text-primary",children:"Payer Details (Optional)"}),(0,b.jsx)(e.Input,{label:"Brand / Payer name",placeholder:"optional",value:k.payer||"",onChange:a=>l(b=>({...b,payer:a}))}),(0,b.jsx)(f.TextArea,{label:"Note",rows:3,placeholder:"Advance for January campaign",value:k.note||"",onChange:a=>l(b=>({...b,note:a}))})]}),(0,b.jsxs)("div",{className:"flex min-w-0 flex-col gap-2",children:[(0,b.jsx)("h3",{className:"text-md font-semibold text-primary",children:"Payment Method"}),(0,b.jsx)(e.Input,{label:"Method",isDisabled:!0,value:k.method,onChange:()=>{}}),(0,b.jsx)(e.Input,{label:"UPI ID",isDisabled:!0,value:n.upiIds[0],onChange:()=>{}})]})]})]})})})]})}function p({isOpen:a,onOpenChange:d,payment:f,notify:g,onRecord:j,onViewReceipt:k}){let l=f?`/pay/${f.id}`:"",m=f?`Payment request for ₹${f.amount.toLocaleString("en-IN")} — ${f.service}`:"",n=async a=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(a),!0}catch{}try{let b=window.Blob||Blob;if(navigator.clipboard&&navigator.clipboard.write&&b){let c=new window.ClipboardItem({"text/plain":new b([a],{type:"text/plain"})});return await navigator.clipboard.write([c]),!0}}catch{}try{let b=document.createElement("textarea");b.value=a,b.setAttribute("readonly",""),b.style.position="fixed",b.style.top="0",b.style.left="0",b.style.width="1px",b.style.height="1px",b.style.opacity="0",b.style.pointerEvents="none",document.body.appendChild(b),b.focus(),b.select(),b.setSelectionRange(0,b.value.length);let c=document.execCommand("copy");if(document.body.removeChild(b),c)return!0}catch{}return!1};return(0,b.jsxs)(h.DialogTrigger,{isOpen:a,onOpenChange:d,children:[(0,b.jsx)("span",{slot:"trigger"}),(0,b.jsx)(i.ModalOverlay,{isDismissable:!0,className:({isEntering:a,isExiting:b})=>`fixed inset-0 z-50 bg-overlay/40 backdrop-blur-sm ${a?"duration-150 ease-out animate-in fade-in":""} ${b?"duration-100 ease-in animate-out fade-out":""}`,children:({state:a})=>(0,b.jsx)(i.Modal,{className:"w-full cursor-auto",children:(0,b.jsxs)(h.Dialog,{"aria-label":"Payment details",className:"ml-auto h-dvh w-full max-w-md overflow-y-auto rounded-none bg-primary shadow-xl ring-1 ring-secondary_alt focus:outline-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border-b border-secondary px-4 py-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-primary",children:"Payment Details"}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(c.Button,{size:"sm",onClick:()=>a.close(),children:"Close"})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-6 px-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Brand / Payer"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:f?.brand||""})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Service"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:f?.service||""})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Amount"}),(0,b.jsxs)("p",{className:"text-sm text-primary",children:["₹",f?f.amount.toLocaleString("en-IN"):"0"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Mode"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:f?.mode||""})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Status"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:f?"received"===f.status?"Received":"Pending":""})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Date"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:f?.date||""})]})]}),(0,b.jsx)(e.Input,{label:"Generated Link",isDisabled:!0,value:l,onChange:()=>{}}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(c.Button,{size:"sm",color:"secondary",isDisabled:!f,onClick:()=>{let a=`${m}
${l}`;console.log(a),n(a).then(b=>{if(b)g("Text copied");else try{window.prompt("Copy text",a),g("Text ready to copy")}catch{g("Copy failed")}})},children:"Copy Link"}),(0,b.jsx)(c.Button,{size:"sm",color:"secondary",isDisabled:!f,onClick:()=>{let a=`https://wa.me/?text=${encodeURIComponent(`${m}
${l}`)}`;window.open(a,"_blank")},children:"Share on WhatsApp"}),(0,b.jsx)(c.Button,{size:"sm",color:"secondary",isDisabled:!f,onClick:async()=>{try{navigator.share?(await navigator.share({title:"Payment Request",text:m,url:l}),g("Share sheet opened")):(await navigator.clipboard.writeText(`${m}
${l}`),g("Link copied"))}catch{g("Sharing failed")}},children:"Share Anywhere"})]}),(0,b.jsxs)("div",{className:"flex min-w-0 flex-col gap-3",children:[(0,b.jsx)("h3",{className:"text-md font-semibold text-primary",children:"Actions"}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(c.Button,{size:"sm",color:"secondary",isDisabled:!f,onClick:()=>j(f),children:"Record as Received"}),(0,b.jsx)(c.Button,{size:"sm",color:"secondary",isDisabled:!f,onClick:()=>k(f),children:"View Receipt"})]})]})]})]})})})]})}function q({isOpen:a,onOpenChange:d,draft:k,setDraft:l,onSave:m}){let n=(0,j.useRef)(null);return(0,b.jsxs)(h.DialogTrigger,{isOpen:a,onOpenChange:d,children:[(0,b.jsx)("span",{slot:"trigger"}),(0,b.jsx)(i.ModalOverlay,{isDismissable:!0,className:({isEntering:a,isExiting:b})=>`fixed inset-0 z-50 bg-overlay/40 backdrop-blur-sm ${a?"duration-150 ease-out animate-in fade-in":""} ${b?"duration-100 ease-in animate-out fade-out":""}`,children:({state:a})=>(0,b.jsx)(i.Modal,{className:"w-full cursor-auto",children:(0,b.jsxs)(h.Dialog,{"aria-label":"Record payment",className:"ml-auto h-dvh w-full max-w-md overflow-y-auto rounded-none bg-primary shadow-xl ring-1 ring-secondary_alt focus:outline-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border-b border-secondary px-4 py-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-primary",children:"Record Payment"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.Button,{size:"sm",color:"secondary",onClick:m,children:"Mark as Received"}),(0,b.jsx)(c.Button,{size:"sm",onClick:()=>a.close(),children:"Cancel"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-6 px-4 py-4",children:[(0,b.jsxs)("div",{className:"flex min-w-0 flex-col gap-2",children:[(0,b.jsx)(e.Input,{label:"Amount (₹)",type:"number",inputMode:"numeric",placeholder:"required",value:"number"==typeof k.amount?String(k.amount):"",onChange:a=>l(b=>({...b,amount:a?Number(a):void 0}))}),(0,b.jsx)(g.Select,{size:"md",label:"Payment mode",items:[{id:"UPI",label:"UPI"},{id:"Bank",label:"Bank transfer"},{id:"Cash",label:"Cash"},{id:"Other",label:"Other"}],selectedKey:k.mode,onSelectionChange:a=>l(b=>({...b,mode:String(a)})),children:a=>(0,b.jsx)(g.Select.Item,{id:a.id,children:a.label})}),(0,b.jsx)(e.Input,{label:"Transaction ID",placeholder:"optional",value:k.txId||"",onChange:a=>l(b=>({...b,txId:a}))}),(0,b.jsx)(e.Input,{label:"Date of payment",placeholder:"e.g. 12 Dec",value:k.date,onChange:a=>l(b=>({...b,date:a}))})]}),(0,b.jsxs)("div",{className:"flex min-w-0 flex-col gap-2",children:[(0,b.jsx)("h3",{className:"text-md font-semibold text-primary",children:"Proof (Optional)"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.Button,{size:"sm",color:"secondary",onClick:()=>n.current?.click(),children:"Upload screenshot / PDF"}),(0,b.jsx)("input",{ref:n,type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:a=>{let b=a.target.files?.[0];b&&l(a=>({...a,proofUrl:b.name}))}})]}),(0,b.jsx)(f.TextArea,{label:"Notes",rows:3,value:k.notes||"",onChange:a=>l(b=>({...b,notes:a}))})]})]})]})})})]})}function r({isOpen:a,onOpenChange:d,payment:e,creator:f,onDownload:g,onShare:j}){return(0,b.jsxs)(h.DialogTrigger,{isOpen:a,onOpenChange:d,children:[(0,b.jsx)("span",{slot:"trigger"}),(0,b.jsx)(i.ModalOverlay,{isDismissable:!0,className:({isEntering:a,isExiting:b})=>`fixed inset-0 z-50 bg-overlay/40 backdrop-blur-sm ${a?"duration-150 ease-out animate-in fade-in":""} ${b?"duration-100 ease-in animate-out fade-out":""}`,children:({state:a})=>(0,b.jsx)(i.Modal,{className:"w-full cursor-auto",children:(0,b.jsxs)(h.Dialog,{"aria-label":"Payment receipt",className:"ml-auto h-dvh w-full max-w-md overflow-y-auto rounded-none bg-primary shadow-xl ring-1 ring-secondary_alt focus:outline-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border-b border-secondary px-4 py-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-primary",children:"Payment Receipt"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.Button,{size:"sm",color:"secondary",onClick:g,children:"Download PDF"}),(0,b.jsx)(c.Button,{size:"sm",color:"secondary",onClick:j,children:"Share"}),(0,b.jsx)(c.Button,{size:"sm",onClick:()=>a.close(),children:"Close"})]})]}),(0,b.jsx)("div",{className:"flex flex-col gap-4 px-4 py-4",children:(0,b.jsxs)("div",{className:"rounded-xl ring-1 ring-secondary_alt p-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-primary",children:"Payment Receipt (Non-Tax)"}),(0,b.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Creator"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:f.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Brand / Payer"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:e.brand||""})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Service"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:e.service})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Amount"}),(0,b.jsxs)("p",{className:"text-sm text-primary",children:["₹",new Intl.NumberFormat("en-IN").format(e.amount)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Date"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:e.date})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Payment mode"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:e.mode})]}),e.txId&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Transaction ID"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:e.txId})]})]})]})})]})})})]})}function s({isOpen:a,onOpenChange:d,details:e}){return(0,b.jsxs)(h.DialogTrigger,{isOpen:a,onOpenChange:d,children:[(0,b.jsx)("span",{slot:"trigger"}),(0,b.jsx)(i.ModalOverlay,{isDismissable:!0,className:({isEntering:a,isExiting:b})=>`fixed inset-0 z-50 bg-overlay/40 backdrop-blur-sm ${a?"duration-150 ease-out animate-in fade-in":""} ${b?"duration-100 ease-in animate-out fade-out":""}`,children:({state:a})=>(0,b.jsx)(i.Modal,{className:"w-full h-dvh cursor-auto grid place-items-center",children:(0,b.jsxs)(h.Dialog,{"aria-label":"New Payment Link Generated",className:"w-[min(92vw,520px)] overflow-hidden rounded-2xl bg-primary shadow-2xl ring-1 ring-secondary_alt focus:outline-hidden",children:[(0,b.jsx)("div",{className:"border-b border-secondary px-5 py-4",children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-primary text-center",children:"New Payment Link Generated"})}),(0,b.jsxs)("div",{className:"px-5 py-5",children:[e?(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Amount"}),(0,b.jsxs)("p",{className:"text-sm text-primary",children:["₹",new Intl.NumberFormat("en-IN").format(e.amount)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Purpose"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:e.purpose})]})]}),e.payer?(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary",children:"Payer"}),(0,b.jsx)("p",{className:"text-sm text-primary",children:e.payer})]}):null,(0,b.jsx)("p",{className:"text-xs text-secondary mt-2",children:"The table has been updated. You can share the link from the payment’s details pane."})]}):(0,b.jsx)("p",{className:"text-sm text-primary text-center",children:"The payment has been created."}),(0,b.jsx)("div",{className:"mt-5 flex justify-center",children:(0,b.jsx)(c.Button,{size:"sm",onClick:()=>a.close(),children:"Close"})})]})]})})})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=src_app_admin_payments_page_tsx_bbed5f8d._.js.map