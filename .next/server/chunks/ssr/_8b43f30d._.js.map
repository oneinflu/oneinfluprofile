{"version":3,"sources":["../../../../node_modules/%40untitledui/icons/dist/HelpCircle.mjs","../../../../node_modules/%40untitledui/icons/dist/Edit01.mjs","../../../../src/app/login/page.tsx"],"sourcesContent":["import*as e from\"react\";const i=({size:r=24,color:o=\"currentColor\",...t})=>e.createElement(\"svg\",{viewBox:\"0 0 24 24\",width:r,height:r,stroke:o,strokeWidth:\"2\",fill:\"none\",strokeLinecap:\"round\",strokeLinejoin:\"round\",\"aria-hidden\":\"true\",...t},e.createElement(\"path\",{d:\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3m.08 4h.01M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Z\"}));i.displayName=\"HelpCircle\";export{i as HelpCircle};\n","import*as o from\"react\";const i=({size:r=24,color:e=\"currentColor\",...t})=>o.createElement(\"svg\",{viewBox:\"0 0 24 24\",width:r,height:r,stroke:e,strokeWidth:\"2\",fill:\"none\",strokeLinecap:\"round\",strokeLinejoin:\"round\",\"aria-hidden\":\"true\",...t},o.createElement(\"path\",{d:\"M2.876 18.116c.046-.414.069-.62.131-.814a2 2 0 0 1 .234-.485c.111-.17.259-.317.553-.61L17 3a2.828 2.828 0 1 1 4 4L7.794 20.206c-.294.294-.442.442-.611.553a2 2 0 0 1-.485.233c-.193.063-.4.086-.814.132L2.5 21.5l.376-3.384Z\"}));i.displayName=\"Edit01\";export{i as Edit01};\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { UntitledLogo } from \"@/components/foundations/logo/untitledui-logo\";\nimport { Input } from \"@/components/base/input/input\";\nimport { Button } from \"@/components/base/buttons/button\";\nimport { SocialButton } from \"@/components/base/buttons/social-button\";\nimport { ButtonUtility } from \"@/components/base/buttons/button-utility\";\nimport { Edit01 } from \"@untitledui/icons\";\nimport { useAuth } from \"@/providers/auth\";\n\nexport default function LoginPage() {\n    const [identifier, setIdentifier] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [showPassword, setShowPassword] = useState(false);\n    const [loginLoading, setLoginLoading] = useState(false);\n    const [otpLoading, setOtpLoading] = useState(false);\n    const router = useRouter();\n    const { loginPassword, loginSendOtp, loginVerifyOtp } = useAuth();\n\n    const handleContinue = () => {\n        if (!showPassword) {\n            if (!identifier.trim()) return;\n            setShowPassword(true);\n            const payload = { identifier: identifier.trim() };\n            const expected = {\n                success: true,\n                status: \"ok\",\n                message: \"Identifier accepted\",\n                data: { methods: [\"password\", \"otp\"], userExists: true },\n                traceId: \"trace_identify\",\n            };\n            console.group(\"LOGIN_IDENTIFY\");\n            console.log(\"REQUEST POST /api/auth/identify\", payload);\n            console.log(\"EXPECTED_RESPONSE_SHAPE\", expected);\n            console.groupEnd();\n            return;\n        }\n        handleLogin();\n    };\n\n    const handleLogin = async () => {\n        if (loginLoading) return;\n        setLoginLoading(true);\n        try {\n            await loginPassword(identifier.trim(), password);\n            router.push(\"/admin\");\n        } finally {\n            setLoginLoading(false);\n        }\n    };\n\n    const handleGoogle = () => {\n        const payload = {\n            provider: \"google\",\n            method: \"oauth\",\n            redirectUri: typeof window !== \"undefined\" ? window.location.origin + \"/login/callback\" : \"https://oneinflu.com/login/callback\",\n        };\n        const expected = {\n            success: true,\n            status: \"redirect\",\n            message: \"Redirect to provider\",\n            data: { authorizationUrl: \"https://accounts.google.com/o/oauth2/v2/auth?...\" },\n            traceId: \"trace_oauth\",\n        };\n        // eslint-disable-next-line no-console\n        console.group(\"LOGIN_OAUTH\");\n        // eslint-disable-next-line no-console\n        console.log(\"REQUEST /api/auth/oauth/start\", payload);\n        // eslint-disable-next-line no-console\n        console.log(\"EXPECTED_RESPONSE_SHAPE\", expected);\n        // eslint-disable-next-line no-console\n        console.groupEnd();\n    };\n\n    const handleOtp = async () => {\n        if (otpLoading) return;\n        setOtpLoading(true);\n        try {\n            await loginSendOtp(identifier.trim());\n            const to = encodeURIComponent(identifier.trim());\n            router.push(`/verify?mode=login&identifier=${to}`);\n        } finally {\n            setOtpLoading(false);\n        }\n    };\n\n    return (\n        <section className=\"flex min-h-screen\">\n            <div className=\"flex w-full flex-col md:grid md:grid-cols-2\">\n                <div className=\"flex min-h-screen w-full flex-col px-4 py-12 md:px-12 lg:px-16 xl:px-20\">\n                    <div className=\"flex w-full items-start justify-start\">\n                        <UntitledLogo className=\"h-8 w-auto\" />\n                    </div>\n\n                    <div className=\"mx-auto flex w-full max-w-sm grow items-center md:mx-0 md:max-w-md\">\n                        <div className=\"flex w-full flex-col gap-6\">\n                            <div className=\"flex flex-col gap-2\">\n                                <h1 className=\"text-display-sm font-semibold text-primary\">Welcome Back!</h1>\n                                <p className=\"text-md text-tertiary\">Access your account with your email or username.</p>\n                            </div>\n\n                            <div className=\"flex items-center gap-2\">\n                                <Input label=\"Email or Username\" placeholder=\"Enter email or handle\" value={identifier} onChange={(v) => setIdentifier(String(v))} isReadOnly={showPassword} className=\"flex-1\" />\n                                {showPassword && <ButtonUtility aria-label=\"Edit\" icon={Edit01} size=\"sm\" onClick={() => setShowPassword(false)} />}\n                            </div>\n\n                            {showPassword && <Input label=\"Password\" type=\"password\" placeholder=\"Enter your password\" value={password} onChange={(v) => setPassword(String(v))} />}\n\n                            <Button\n                                size=\"lg\"\n                                onClick={handleContinue}\n                                isDisabled={!identifier.trim() || (showPassword && !password.trim()) || loginLoading}\n                                isLoading={showPassword ? loginLoading : false}\n                            >\n                                Continue\n                            </Button>\n                            {showPassword && (\n                                <Button\n                                    size=\"lg\"\n                                    color=\"secondary\"\n                                    onClick={handleOtp}\n                                    isDisabled={otpLoading}\n                                    isLoading={otpLoading}\n                                >\n                                    Continue with one-time password\n                                </Button>\n                            )}\n\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"h-px w-full bg-border-secondary\" />\n                                <span className=\"text-sm text-tertiary\">or</span>\n                                <div className=\"h-px w-full bg-border-secondary\" />\n                            </div>\n\n                            {/* <SocialButton social=\"google\" size=\"lg\" className=\"w-full\" onClick={handleGoogle}>Continue with Google</SocialButton> */}\n\n                            <div className=\"flex items-center justify-between\">\n                                <Button color=\"link-gray\" size=\"sm\">Forgot password</Button>\n                                <Button color=\"link-gray\" size=\"sm\">Forgot username</Button>\n                            </div>\n\n                            <div className=\"flex items-center gap-2\">\n                                <span className=\"text-sm text-tertiary\">New here?</span>\n                                <Button color=\"link-color\" size=\"sm\" href=\"/register\">Register</Button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"hidden md:block\">\n                    <img\n                        alt=\"Login illustration\"\n                        src=\"/login.png\"\n                        className=\"h-full w-full object-cover\"\n                    />\n                </div>\n            </div>\n        </section>\n    );\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1]}